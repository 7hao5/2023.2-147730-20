{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.MQTTJS_VERSION = exports.nextTick = exports.applyMixin = exports.ErrorWithReasonCode = void 0;\nclass ErrorWithReasonCode extends Error {\n  constructor(message, code) {\n    super(message);\n    this.code = code;\n    Object.setPrototypeOf(this, ErrorWithReasonCode.prototype);\n    Object.getPrototypeOf(this).name = 'ErrorWithReasonCode';\n  }\n}\nexports.ErrorWithReasonCode = ErrorWithReasonCode;\nfunction applyMixin(target, mixin, includeConstructor = false) {\n  var _a;\n  const inheritanceChain = [mixin];\n  while (true) {\n    const current = inheritanceChain[0];\n    const base = Object.getPrototypeOf(current);\n    if (base === null || base === void 0 ? void 0 : base.prototype) {\n      inheritanceChain.unshift(base);\n    } else {\n      break;\n    }\n  }\n  for (const ctor of inheritanceChain) {\n    for (const prop of Object.getOwnPropertyNames(ctor.prototype)) {\n      if (includeConstructor || prop !== 'constructor') {\n        Object.defineProperty(target.prototype, prop, (_a = Object.getOwnPropertyDescriptor(ctor.prototype, prop)) !== null && _a !== void 0 ? _a : Object.create(null));\n      }\n    }\n  }\n}\nexports.applyMixin = applyMixin;\nexports.nextTick = typeof (process === null || process === void 0 ? void 0 : process.nextTick) === 'function' ? process.nextTick : callback => {\n  setTimeout(callback, 0);\n};\nexports.MQTTJS_VERSION = require('../../package.json').version;","map":{"version":3,"names":["ErrorWithReasonCode","Error","constructor","message","code","Object","setPrototypeOf","prototype","getPrototypeOf","name","exports","applyMixin","target","mixin","includeConstructor","inheritanceChain","current","base","unshift","ctor","prop","getOwnPropertyNames","defineProperty","_a","getOwnPropertyDescriptor","create","nextTick","process","callback","setTimeout","MQTTJS_VERSION","require","version"],"sources":["C:\\Users\\vuhuy\\OneDrive - Hanoi University of Science and Technology\\NEWCODE\\ITSS_JP_2\\node_modules\\mqtt\\src\\lib\\shared.ts"],"sourcesContent":["import type { Packet } from 'mqtt-packet'\r\nimport type { Duplex } from 'stream'\r\nimport type MqttClient from './client'\r\nimport type { IClientOptions } from './client'\r\n\r\nexport type DoneCallback = (error?: Error) => void\r\n\r\nexport type GenericCallback<T> = (error?: Error, result?: T) => void\r\n\r\nexport type VoidCallback = () => void\r\n\r\nexport type IStream = Duplex & {\r\n\t/** only set on browsers, it's a [WebSocket](https://developer.mozilla.org/en-US/docs/Web/API/WebSocket)  */\r\n\tsocket?: any\r\n}\r\n\r\nexport type StreamBuilder = (\r\n\tclient: MqttClient,\r\n\topts?: IClientOptions,\r\n) => IStream\r\n\r\nexport type Callback = () => void\r\n\r\nexport type PacketHandler = (\r\n\tclient: MqttClient,\r\n\tpacket: Packet,\r\n\tdone?: DoneCallback,\r\n) => void\r\n\r\nexport type TimerVariant = 'auto' | 'worker' | 'native'\r\n\r\nexport class ErrorWithReasonCode extends Error {\r\n\tpublic code: number\r\n\r\n\tpublic constructor(message: string, code: number) {\r\n\t\tsuper(message)\r\n\t\tthis.code = code\r\n\r\n\t\t// We need to set the prototype explicitly\r\n\t\tObject.setPrototypeOf(this, ErrorWithReasonCode.prototype)\r\n\t\tObject.getPrototypeOf(this).name = 'ErrorWithReasonCode'\r\n\t}\r\n}\r\n\r\n// eslint-disable-next-line @typescript-eslint/ban-types\r\nexport type Constructor<T = {}> = new (...args: any[]) => T\r\n\r\nexport function applyMixin(\r\n\ttarget: Constructor,\r\n\tmixin: Constructor,\r\n\tincludeConstructor = false,\r\n): void {\r\n\t// Figure out the inheritance chain of the mixin\r\n\tconst inheritanceChain: Constructor[] = [mixin]\r\n\t// eslint-disable-next-line no-constant-condition\r\n\twhile (true) {\r\n\t\tconst current = inheritanceChain[0]\r\n\t\tconst base = Object.getPrototypeOf(current)\r\n\t\tif (base?.prototype) {\r\n\t\t\tinheritanceChain.unshift(base)\r\n\t\t} else {\r\n\t\t\tbreak\r\n\t\t}\r\n\t}\r\n\tfor (const ctor of inheritanceChain) {\r\n\t\tfor (const prop of Object.getOwnPropertyNames(ctor.prototype)) {\r\n\t\t\t// Do not override the constructor\r\n\t\t\tif (includeConstructor || prop !== 'constructor') {\r\n\t\t\t\tObject.defineProperty(\r\n\t\t\t\t\ttarget.prototype,\r\n\t\t\t\t\tprop,\r\n\t\t\t\t\tObject.getOwnPropertyDescriptor(ctor.prototype, prop) ??\r\n\t\t\t\t\t\tObject.create(null),\r\n\t\t\t\t)\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\nexport const nextTick =\r\n\ttypeof process?.nextTick === 'function'\r\n\t\t? process.nextTick\r\n\t\t: (callback: () => void) => {\r\n\t\t\t\tsetTimeout(callback, 0)\r\n\t\t  }\r\n\r\n// eslint-disable-next-line @typescript-eslint/no-var-requires\r\nexport const MQTTJS_VERSION = require('../../package.json').version\r\n"],"mappings":";;;;;;AA+BA,MAAaA,mBAAoB,SAAQC,KAAK;EAG7CC,YAAmBC,OAAe,EAAEC,IAAY;IAC/C,KAAK,CAACD,OAAO,CAAC;IACd,IAAI,CAACC,IAAI,GAAGA,IAAI;IAGhBC,MAAM,CAACC,cAAc,CAAC,IAAI,EAAEN,mBAAmB,CAACO,SAAS,CAAC;IAC1DF,MAAM,CAACG,cAAc,CAAC,IAAI,CAAC,CAACC,IAAI,GAAG,qBAAqB;EACzD;;AAVDC,OAAA,CAAAV,mBAAA,GAAAA,mBAAA;AAgBA,SAAgBW,UAAUA,CACzBC,MAAmB,EACnBC,KAAkB,EAClBC,kBAAkB,GAAG,KAAK;;EAG1B,MAAMC,gBAAgB,GAAkB,CAACF,KAAK,CAAC;EAE/C,OAAO,IAAI,EAAE;IACZ,MAAMG,OAAO,GAAGD,gBAAgB,CAAC,CAAC,CAAC;IACnC,MAAME,IAAI,GAAGZ,MAAM,CAACG,cAAc,CAACQ,OAAO,CAAC;IAC3C,IAAIC,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEV,SAAS,EAAE;MACpBQ,gBAAgB,CAACG,OAAO,CAACD,IAAI,CAAC;KAC9B,MAAM;MACN;;;EAGF,KAAK,MAAME,IAAI,IAAIJ,gBAAgB,EAAE;IACpC,KAAK,MAAMK,IAAI,IAAIf,MAAM,CAACgB,mBAAmB,CAACF,IAAI,CAACZ,SAAS,CAAC,EAAE;MAE9D,IAAIO,kBAAkB,IAAIM,IAAI,KAAK,aAAa,EAAE;QACjDf,MAAM,CAACiB,cAAc,CACpBV,MAAM,CAACL,SAAS,EAChBa,IAAI,EACJ,CAAAG,EAAA,GAAAlB,MAAM,CAACmB,wBAAwB,CAACL,IAAI,CAACZ,SAAS,EAAEa,IAAI,CAAC,cAAAG,EAAA,cAAAA,EAAA,GACpDlB,MAAM,CAACoB,MAAM,CAAC,IAAI,CAAC,CACpB;;;;AAIL;AA9BAf,OAAA,CAAAC,UAAA,GAAAA,UAAA;AA+BaD,OAAA,CAAAgB,QAAQ,GACpB,QAAOC,OAAO,aAAPA,OAAO,uBAAPA,OAAO,CAAED,QAAQ,MAAK,UAAU,GACpCC,OAAO,CAACD,QAAQ,GACfE,QAAoB,IAAI;EACzBC,UAAU,CAACD,QAAQ,EAAE,CAAC,CAAC;AACvB,CAAC;AAGQlB,OAAA,CAAAoB,cAAc,GAAGC,OAAO,CAAC,oBAAoB,CAAC,CAACC,OAAO","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}